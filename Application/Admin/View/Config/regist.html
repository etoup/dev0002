<!doctype html>
<html>
<head>
<include file='Public/head' />
</head>
<body>
<div class="wrap">
    <div class="nav">
        <ul class="cc">
            <li class="current"><a href="{:U('regist')}">注册设置</a></li>
            <li><a href="{:U('login')}">登录设置</a></li>
        </ul>
    </div>
    <div class="h_a">注册设置</div>
    <form class="J_ajaxForm" data-role="list" action="__SELF__" method="post" >
    <div class="table_full">
        <table width="100%">
            <col class="th" />
            <col width="400" />
            <col />
            <tr>
                <th>允许新用户注册</th>
                <td>
                    <ul class="single_list cc J_radio_change" id="J_register_type">
                        <li><label><input type="radio" name="config[REGIST_CONTROL]" data-arr="reg2" value="1" {:is_checked(C('REGIST_CONTROL'),1)}><span>开放注册</span></label></li>
                        <li><label><input type="radio" name="config[REGIST_CONTROL]" data-arr="reg1,reg2,J_reg2_intro" value="2" {:is_checked(C('REGIST_CONTROL'),2)}><span>邀请注册</span></label></li>
                        <li><label><input type="radio" name="config[REGIST_CONTROL]" data-arr="reg3,J_reg3_intro" value="0" {:is_checked(C('REGIST_CONTROL'),0)}><span>关闭注册</span></label></li>
                    </ul>
                </td>
                <td>
                <div class="fun_tips">
                    <div class="J_radio_change_items" id="J_reg2_intro">选择“邀请注册”，则站点只开放邀请注册</div>
                    <div class="J_radio_change_items" id="J_reg3_intro">选择“关闭注册”，将禁止游客注册成为会员，但不影响过去已注册的会员的使用</div>
                </div>
                </td>
            </tr>
        </table>
<!--邀请注册内容-->
        <table width="100%" class="J_radio_change_items" id="reg1" style="margin-bottom:0;">
            <col class="th" />
            <col width="400" />
            <col />
            <tbody>
                <tr>
                    <th>有效期限</th>
                    <td>
                        <input type="text" class="input length_3 mr5" value="{:C('INVITE_EXPIRED')}" name="config[INVITE_EXPIRED]">天
                    </td>
                    <td><div class="fun_tips">设置邀请码有效期限，如果购买后没有在有效期内使用，则失效。</div></td>
                </tr>
                <tr>
                    <th>邀请成功积分奖励</th>
                    <td>
                        <input type="text" class="input length_3 mr5" value="{:C('CREDIT_NUM')}" name="config[CREDIT_NUM]">
                    </td>
                    <td><div class="fun_tips">设置邀请成功后邀请人获得的积分奖励数值。</div></td>
                </tr>
            </tbody>
        </table>
<!--结束-->
    </div>
    <div class="h_a">基本设置</div>
    <div class="table_full">
        <table width="100%" class="J_radio_change_items" id="reg2" style="margin-bottom:0;">
            <col class="th" />
            <col width="400" />
            <col />
            <tbody>
                <tr>
                    <th>注册协议内容</th>
                    <td>
                        <textarea class="length_5" name="config[PROTOCOL]">{:C('PROTOCOL')}</textarea>
                    </td>
                    <td><div class="fun_tips">注册许可协议的内容。支持html代码。</div></td>
                </tr>
                <tr>
                    <th>同一IP重复注册[小时]</th>
                    <td>
                        <input type="number" class="input length_5 mr5" name="config[SECURITYIP]" value="{:C('SECURITYIP')}">小时
                    </td>
                    <td><div class="fun_tips">规定时间内，同一IP将无法进行多次注册。0或留空表示不限制。</div></td>
                </tr>
                <tr>
                    <th>注册开启验证码</th>
                    <td>
                        <ul class="switch_list cc">
                            <li><label><input type="radio" name="config[CHECK_VERIFY_REG]" value="1" {:is_checked(C('CHECK_VERIFY_REG'),1)}><span>开启</span></label></li>
                            <li><label><input type="radio" name="config[CHECK_VERIFY_REG]" value="0" {:is_checked(C('CHECK_VERIFY_REG'),0)}><span>关闭</span></label></li>
                        </ul>
                    </td>
                    <td><div class="fun_tips">开启后,注册显示验证码并验证。</div></td>
                </tr>
                <tr>
                    <th>注册验证手机</th>
                    <td>
                        <ul class="switch_list cc">
                            <li><label><input type="radio" name="config[ACTIVEPHONE]" value="1" {:is_checked(C('ACTIVEPHONE'),1)}><span>开启</span></label></li>
                            <li><label><input type="radio" name="config[ACTIVEPHONE]" value="0" {:is_checked(C('ACTIVEPHONE'),0)}><span>关闭</span></label></li>
                        </ul>
                    </td>
                    <td><div class="fun_tips">选择“开启”，则用户在注册时需要验证手机。请确保已开启<a href="{@url:config/mobile/run}" class="J_linkframe_trigger">手机服务</a>。</div></td>
                </tr>
                <tr>
                    <th>新用户注册审核</th>
                    <td>
                        <ul class="switch_list cc">
                            <li><label><input type="radio" name="config[ACTIVECHECK]" value="1" {:is_checked(C('ACTIVECHECK'),1)}><span>开启</span></label></li>
                            <li><label><input type="radio" name="config[ACTIVECHECK]" value="0" {:is_checked(C('ACTIVECHECK'),0)}><span>关闭</span></label></li>
                        </ul>
                    </td>
                    <td><div class="fun_tips">开启后,新用户只有通过管理员审核才能发帖。</div></td>
                </tr>
                <tr>
                    <th>新用户邮件激活</th>
                    <td>
                        <ul class="switch_list cc">
                            <li><label><input type="radio" name="config[ACTIVEMAIL]" value="1" {:is_checked(C('ACTIVEMAIL'),1)}><span>开启</span></label></li>
                            <li><label><input type="radio" name="config[ACTIVEMAIL]" value="0" {:is_checked(C('ACTIVEMAIL'),0)}><span>关闭</span></label></li>
                        </ul>
                    </td>
                    <td><div class="fun_tips">必须先在<a href="{}" class="J_linkframe_trigger">邮件设置</a>中配置邮件服务并测试成功。开启后，系统将向注册 电子邮箱 发送一封验证电子邮件以确认电子邮箱的有效性。用户收到电子邮件并激活帐号后才能拥有正常的权限。</div></td>
                </tr>
                <tr>
                    <th>激活邮件标题</th>
                    <td>
                        <input type="text" class="input length_5 mr5" name="config[ACTIVETITLE]" value="{:C('ACTIVETITLE')}">
                    </td>
                    <td>
                    <literal>
                    <div class="fun_tips">支持参数，如下：<br>{$sitename}：站点名称</div>
                    </literal>
                    </td>
                </tr>
                <tr>
                    <th>激活邮件内容</th>
                    <td>
                        <textarea class="length_5" name="config[ACTIVECONTENT]">{:C('ACTIVECONTENT')}</textarea>
                    </td>
                    <td>
                        <literal>
                        <div class="fun_tips">支持html代码，支持参数：<br>{$username}：用户名<br>{$sitename}：站点名称<br>{$url}：激活地址<br>{$time}：发送时间。</div>
                        </literal>
                    </td>
                </tr>
                <tr>
                    <th>发送欢迎信息</th>
                    <td>
                        <ul class="single_list cc">
                            <if condition="in_array(1,$welcomeTtpe)">
                            <li><label><input type="checkbox" name="config[WELCOMETYPE][]" value="1" checked=""><span>站内短信</span></label></li>
                            <else/>
                            <li><label><input type="checkbox" name="config[WELCOMETYPE][]" value="1"><span>站内短信</span></label></li>
                            </if>
                            <if condition="in_array(2,$welcomeTtpe)">
                            <li><label><input type="checkbox" name="config[WELCOMETYPE][]" value="2" checked=""><span>电子邮件</span></label></li>
                            <else/>
                            <li><label><input type="checkbox" name="config[WELCOMETYPE][]" value="2"><span>电子邮件</span></label></li>
                            </if>
                        </ul>
                    </td>
                    <td><div class="fun_tips">新用户注册后系统自动发送表示欢迎的站内短信或电子邮件。<br/>如果开启了邮件激活,则只发送激活邮件,不发送欢迎邮件,必须先在<a href="{}" class="J_linkframe_trigger">邮件设置</a>中配置邮件服务并测试成功。</div></td>
                </tr>
                <tr>
                    <th>欢迎信息标题</th>
                    <td>
                        <input type="text" class="input length_5 mr5" name="config[WELCOMETITLE]" value="{:C('WELCOMETITLE')}">
                    </td>
                    <td>
                    <literal>
                        <div class="fun_tips">支持参数，如下：<br>{$sitename}：站点名称</div>
                    </literal>
                    </td>
                </tr>
                <tr>
                    <th>欢迎信息内容</th>
                    <td>
                        <textarea class="length_5" name="config[WELCOMECONTENT]">{:C('WELCOMECONTENT')}</textarea>
                    </td>
                    <td>
                    <literal>
                        <div class="fun_tips">支持html代码，支持参数：<br>{$username}：用户名<br>{$sitename}：站点名称<br>{$time}：发送时间。</div>
                    </literal>
                    </td>
                </tr>
                <tr>
                    <th>禁用用户名</th>
                    <td>
                        <textarea class="length_5" name="config[BANUSERNAME]">{:C('BANUSERNAME')}</textarea>
                    </td>
                    <td><div class="fun_tips">包含设定词汇的所有用户名将无法成功注册。如你禁用了"版主"，那么所有含有"版主"(如:我是版主)的用户名将被禁止使用。多个词之间用英文半角逗号","分隔。</div></td>
                </tr>
                <tr>
                    <th>用户名长度控制</th>
                    <td>
                        <input type="number" class="input select_2 mr15" value="{:C('USERNAMEMIN')}" name="config[USERNAMEMIN]"><span class="mr15">到</span>
                        <input type="number" class="input select_2" value="{:C('USERNAMEMAX')}" name="config[USERNAMEMAX]">
                    </td>
                    <td><div class="fun_tips">用户名字符的最小和最大长度，最小值不能小于1，最大值不能大于15。</div></td>
                </tr>
                <tr>
                    <th>密码长度控制</th>
                    <td>
                        <input type="number" class="input select_2 mr15" value="{:C('PASSWORDMIN')}" name="config[PASSWORDMIN]"><span class="mr15">到</span>
                        <input type="number" class="input select_2" value="{:C('PASSWORDMAX')}" name="config[PASSWORDMAX]">
                    </td>
                    <td><div class="fun_tips">最小值不能小于1，无最大值限制，留空表示不限制。</div></td>
                </tr>
            </tbody>
        </table>
        <table width="100%" class="J_radio_change_items" id="reg3" style="margin-bottom:0;">
            <col class="th" />
            <col width="400" />
            <col />
<!--关闭注册内容-->
            <tbody>
                <tr>
                    <th>关闭注册原因</th>
                    <td>
                        <textarea class="length_5" name="config[CLOSEMSG]">{:C('CLOSEMSG')}</textarea>
                    </td>
                    <td><div class="fun_tips">当站点关闭注册时，对外的提示信息。<br>支持html代码。</div></td>
                </tr>
            </tbody>
<!--结束-->
        </table>
    </div>
    <div class="btn_wrap">
        <div class="btn_wrap_pd">
            <button class="btn btn_submit J_ajax_submit_btn" type="submit">提交</button>
        </div>
    </div>
    </form>
</div>
<include file='Public/foot' />
<script>

$(function(){
    //是否允许新用户注册
    /*registAreaShow($('#J_register_type input:checked').data('type'));

    $('#J_register_type input:radio').on('change', function(){
            registAreaShow($(this).data('type'));
    });

    function registAreaShow(type) {
        var reg_arr= new Array();
        reg_arr = type.split(",");
        $('.J_reg_tbody').hide();
        $.each(reg_arr, function(i, o){
            $('#'+ o).show();
        });
    }*/
});
</script>
</body>
</html>